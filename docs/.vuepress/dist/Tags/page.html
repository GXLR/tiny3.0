<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>页面流 | Tiny3.0</title>
    <meta name="description" content="让移动开发更简单易用 高效 原生技术 极致体验">
    
    
    <link rel="preload" href="/tiny3.0/assets/css/0.styles.55d4e0d1.css" as="style"><link rel="preload" href="/tiny3.0/assets/js/app.4f7fd702.js" as="script"><link rel="preload" href="/tiny3.0/assets/js/2.a15a07d6.js" as="script"><link rel="preload" href="/tiny3.0/assets/js/24.7ff93635.js" as="script"><link rel="prefetch" href="/tiny3.0/assets/js/10.b6d8ac5b.js"><link rel="prefetch" href="/tiny3.0/assets/js/11.92d8c21c.js"><link rel="prefetch" href="/tiny3.0/assets/js/12.38d20174.js"><link rel="prefetch" href="/tiny3.0/assets/js/13.9cd0190c.js"><link rel="prefetch" href="/tiny3.0/assets/js/14.2b08de30.js"><link rel="prefetch" href="/tiny3.0/assets/js/15.44bf6da6.js"><link rel="prefetch" href="/tiny3.0/assets/js/16.8c549921.js"><link rel="prefetch" href="/tiny3.0/assets/js/17.b4eff11c.js"><link rel="prefetch" href="/tiny3.0/assets/js/18.95f3592e.js"><link rel="prefetch" href="/tiny3.0/assets/js/19.83a38f06.js"><link rel="prefetch" href="/tiny3.0/assets/js/20.fe6f415b.js"><link rel="prefetch" href="/tiny3.0/assets/js/21.2de78ef3.js"><link rel="prefetch" href="/tiny3.0/assets/js/22.c273b6cc.js"><link rel="prefetch" href="/tiny3.0/assets/js/23.cc928fb9.js"><link rel="prefetch" href="/tiny3.0/assets/js/25.692f9079.js"><link rel="prefetch" href="/tiny3.0/assets/js/26.f78e95d4.js"><link rel="prefetch" href="/tiny3.0/assets/js/27.edfee609.js"><link rel="prefetch" href="/tiny3.0/assets/js/28.e3415c31.js"><link rel="prefetch" href="/tiny3.0/assets/js/29.7e756fe3.js"><link rel="prefetch" href="/tiny3.0/assets/js/3.33224c70.js"><link rel="prefetch" href="/tiny3.0/assets/js/30.874c1c99.js"><link rel="prefetch" href="/tiny3.0/assets/js/31.87fef0b6.js"><link rel="prefetch" href="/tiny3.0/assets/js/32.74a7d9d2.js"><link rel="prefetch" href="/tiny3.0/assets/js/33.55736902.js"><link rel="prefetch" href="/tiny3.0/assets/js/34.4804ce09.js"><link rel="prefetch" href="/tiny3.0/assets/js/35.44a81e13.js"><link rel="prefetch" href="/tiny3.0/assets/js/36.080d382f.js"><link rel="prefetch" href="/tiny3.0/assets/js/37.b54b948b.js"><link rel="prefetch" href="/tiny3.0/assets/js/4.1c37bc38.js"><link rel="prefetch" href="/tiny3.0/assets/js/5.8d5058fd.js"><link rel="prefetch" href="/tiny3.0/assets/js/6.88e45044.js"><link rel="prefetch" href="/tiny3.0/assets/js/7.e8201afe.js"><link rel="prefetch" href="/tiny3.0/assets/js/8.f2eda253.js"><link rel="prefetch" href="/tiny3.0/assets/js/9.469b298a.js">
    <link rel="stylesheet" href="/tiny3.0/assets/css/0.styles.55d4e0d1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/tiny3.0/" class="home-link router-link-active"><!----> <span class="site-name">Tiny3.0</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/tiny3.0/" class="nav-link">主页</a></div><div class="nav-item"><a href="/tiny3.0/guide/" class="nav-link">文档中心</a></div><div class="nav-item"><a href="http://www.mtiny.cn/tiny/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  杭州长亮
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/tiny3.0/" class="nav-link">主页</a></div><div class="nav-item"><a href="/tiny3.0/guide/" class="nav-link">文档中心</a></div><div class="nav-item"><a href="http://www.mtiny.cn/tiny/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  杭州长亮
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Tags</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TinyJS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>其他</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tiny3.0/Tags/advert.html" class="sidebar-link">营销广告页</a></li><li><a href="/tiny3.0/Tags/mvvm.html" class="sidebar-link">mvvm数据绑定</a></li><li><a href="/tiny3.0/Tags/page.html" class="active sidebar-link">页面流</a></li><li><a href="/tiny3.0/Tags/Flex.html" class="sidebar-link">Flex</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="页面流"><a href="#页面流" class="header-anchor">#</a> 页面流</h2> <h3 id="配置文件"><a href="#配置文件" class="header-anchor">#</a> 配置文件</h3> <hr> <h4 id="目录结构"><a href="#目录结构" class="header-anchor">#</a> 目录结构</h4> <h5 id="跳转目标配置文件：xxxxpagecol-xml"><a href="#跳转目标配置文件：xxxxpagecol-xml" class="header-anchor">#</a> 跳转目标配置文件：xxxxPagecol.xml</h5> <p>每个界面都有一个与之对应的xxxxPagecol.xml 用于配置界面流。目录与界面同级。</p> <h5 id="跳转配置文件：pagecontrolconfig-xml"><a href="#跳转配置文件：pagecontrolconfig-xml" class="header-anchor">#</a> 跳转配置文件：pageControlConfig.xml</h5> <p>跳转效果也配置pageControlConfig.xml也存放于项目根目录/config/pageControls 中</p> <h5 id="营销管理配置：pubpagecol-xml"><a href="#营销管理配置：pubpagecol-xml" class="header-anchor">#</a> 营销管理配置：pubPagecol.xml</h5> <p>跳转效果也配置pubPagecol.xml也存放于项目根目录/config/pageControls 中</p> <h4 id="配置文件规则"><a href="#配置文件规则" class="header-anchor">#</a> 配置文件规则</h4> <h5 id="配置界面跳转效果-pagecontrolconfig-xml"><a href="#配置界面跳转效果-pagecontrolconfig-xml" class="header-anchor">#</a> 配置界面跳转效果 pageControlConfig.xml</h5> <div class="language- extra-class"><pre class="language-text"><code>&lt;config&gt;
   &lt;forward  class=&quot;push&quot; pageType=&quot;page&quot; animate=&quot;slideFromRight&quot; hidesTabBar=&quot;true&quot; hideSafeArea=&quot;true&quot; hidesStatusBar=&quot;true&quot; startX=&quot;&quot; startY=&quot;&quot; delay=&quot;&quot;/&gt;
   &lt;forward  class=&quot;present&quot; pageType=&quot;frame&quot; animate=&quot;slideFromRight&quot; closePrevious=&quot;false&quot; disableGestureBack=&quot;true&quot;/&gt;
   &lt;forward  class=&quot;open&quot; pageType=&quot;open&quot; width=&quot;&quot; height=&quot;&quot; animate=&quot;slideFromBottom&quot;/&gt;
   &lt;forward  class=&quot;default&quot; pageType=&quot;page&quot; animate=&quot;slideFromRight&quot; hidesTabBar=&quot;true&quot; hideSafeArea=&quot;true&quot; hidesStatusBar=&quot;true&quot; startX=&quot;&quot; startY=&quot;&quot; delay=&quot;&quot;/&gt;
   &lt;backward  class=&quot;pop&quot; pageType=&quot;page&quot; animate=&quot;slideFromRight&quot; delay=&quot;&quot;/&gt;
   &lt;backward  class=&quot;dismiss&quot; pageType=&quot;frame&quot; animate=&quot;slideFromRight&quot;/&gt;
   &lt;backward  class=&quot;close&quot; pageType=&quot;open&quot; animate=&quot;slideFromBottom&quot;/&gt;
   &lt;backward  class=&quot;default&quot; pageType=&quot;page&quot; animate=&quot;slideFromRight&quot; delay=&quot;&quot;/&gt;
&lt;/config&gt;
</code></pre></div><h5 id="前向跳转效果"><a href="#前向跳转效果" class="header-anchor">#</a> 前向跳转效果</h5> <p>普通界面跳转 （push）</p> <table><thead><tr><th>参数</th> <th>取值</th> <th>取值</th></tr></thead> <tbody><tr><td>pageType</td> <td>page(默认可不写)</td> <td>界面类型</td></tr> <tr><td>animate</td> <td>default、none、slideFromTop、slideFromBottom、slideFromLeft、slideFromRight、slideFromIn</td> <td>过渡动画类型</td></tr> <tr><td>disableGestureBack</td> <td>true/false</td> <td>是否禁用手势(push)</td></tr> <tr><td>hideSafeArea</td> <td>true/false</td> <td>是否隐藏安全区(push)</td></tr> <tr><td>hidesTabBar</td> <td>true/false</td> <td>是否隐藏状态栏tabbar(push)</td></tr> <tr><td>hidesStatusBar</td> <td>true/false</td> <td>是否隐藏状态栏（push)</td></tr> <tr><td>startX</td> <td>float</td> <td>跳转坐标X</td></tr> <tr><td>startY</td> <td>float</td> <td>跳转坐标Y</td></tr> <tr><td>delay</td> <td>int</td> <td>延迟跳转,单位ms</td></tr></tbody></table> <p>跳转框架界面 （ &lt;frame&gt;  present）</p> <table><thead><tr><th>参数</th> <th>取值</th> <th>取值</th></tr></thead> <tbody><tr><td>pageType</td> <td>frame</td> <td>框架</td></tr> <tr><td>animate</td> <td>default,none,slideFromBottom, slideFromLeft, slideFromRight, slideFromTop</td> <td>执行的动画类型</td></tr> <tr><td>closePrevious</td> <td>true/false</td> <td>是否在跳转框架后移除前面的界面（建议移除，否则会有内存问题）。</td></tr></tbody></table> <p>弹窗界面 (open)</p> <table><thead><tr><th>参数</th> <th>取值</th> <th>取值</th></tr></thead> <tbody><tr><td>pageType</td> <td>open</td> <td>如果是open界面则必须填写此参数 取值为true</td></tr> <tr><td>width</td> <td>float</td> <td>页面宽度，支持百分比，为暂用当前屏幕的百分比</td></tr> <tr><td>height</td> <td>float</td> <td>页面高度，支持百分比，为暂用当前屏幕的百分比</td></tr> <tr><td>animate</td> <td>popShake(默认 视图抖动形式), none，slideFromBottom(从底部进入视图)，slideFromTop(从头部进入视图)，slideFromLeft, slideFromRight, scaleFromTopRight(从头部右上角进入视图), scaleFromBottomRight(从底部右下角进入视图)</td> <td>动画类型</td></tr></tbody></table> <h5 id="back跳转效果"><a href="#back跳转效果" class="header-anchor">#</a> back跳转效果</h5> <h6 id="普通出栈pop-back"><a href="#普通出栈pop-back" class="header-anchor">#</a> 普通出栈pop(back)</h6> <p>普通pop只有一种效果只需</p> <div class="language- extra-class"><pre class="language-text"><code> &lt;backward class=&quot;default&quot; /&gt;
</code></pre></div><h6 id="open界面close"><a href="#open界面close" class="header-anchor">#</a> open界面close</h6> <div class="language- extra-class"><pre class="language-text"><code> &lt;backward class=&quot;close&quot; pageType=&quot;open&quot;/&gt;
</code></pre></div><h6 id="frame-框架-dismiss"><a href="#frame-框架-dismiss" class="header-anchor">#</a> frame 框架 dismiss</h6> <table><thead><tr><th>参数</th> <th>取值</th> <th>取值</th></tr></thead> <tbody><tr><td>pageType</td> <td>frame</td> <td>框架</td></tr> <tr><td>animate</td> <td>default,none,slideFromBottom, slideFromLeft, slideFromRight, slideFromTop</td> <td>动画效果</td></tr></tbody></table> <div class="language- extra-class"><pre class="language-text"><code> &lt;backward class=&quot;classC&quot; pageType=&quot;frame&quot; animate=&quot;slideFromBottom&quot;/&gt;

</code></pre></div><h5 id="普通模块存放界面流配置的-xxxxpagecol-xml"><a href="#普通模块存放界面流配置的-xxxxpagecol-xml" class="header-anchor">#</a> 普通模块存放界面流配置的 xxxxPagecol.xml</h5> <p>每个界面都有一个与之对应的xxxxPagecol.xml 用于配置界面流。目录与界面同级。</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;paths&gt;

    &lt;forward&gt;

        &lt;path ty:if=&quot;DATA.state==1&amp;&amp;DATA.name=='kern'&quot; url=&quot;page/start/start.tml&quot; class=&quot;&quot;/&gt; &lt;!-- ddefaultefault效果 class 可以不写   class找不到会使用default--&gt;

        &lt;path ty:if=&quot;DATA.state==2&amp;&amp;DATA.name=='kern'&quot; url=&quot;page/home/notification/notification.tml&quot; class=&quot;pushClassA&quot;/&gt;

        &lt;path ty:elif=&quot;!(DATA.userId==28||DATA.useId==1)&quot; url=&quot;page/nav2.xml&quot; class=&quot;frameClass&quot;/&gt;

        &lt;path ty:elif=&quot;DATA.state==90&quot; url=&quot;page/openPage.xml&quot; class=&quot;openClass&quot;/&gt;

        &lt;path ty:else=&quot;&quot; url=&quot;page3.tml&quot;/&gt;

    &lt;/forward&gt;

    &lt;backward&gt;

        &lt;path ty:if=&quot;DATA.persons.length==5&quot; /&gt; &lt;!-- ddefaultefault效果 class 可以不写   class找不到会使用default  url不写默认返回上一界面 --&gt;

        &lt;path ty:elif=&quot;DATA.number==7&quot; url=&quot;start&quot; /&gt; &lt;!--back的时候 url只需要填界面名称 因为界面已经在栈内，标记Id为界面名称（xxx.tml 名称为 xxx） --&gt;

        &lt;path ty:elif=&quot;DATA.number==6&quot; class=&quot;frameClass&quot;/&gt;

        &lt;path ty:else=&quot;&quot; class=&quot;openClass&quot; /&gt;

    &lt;/backward&gt;

&lt;/paths&gt;




每个界面都会包含一个界面流配置文件
格式：(页面名+Pagecol).xml   例：registerPagecol.xml

跳转配置
最外层为根节点&lt;paths&gt;&lt;/paths&gt;
前向跳转使用&lt;forward&gt;&lt;/forward&gt;
后退返回&lt;backward&gt;&lt;/backward&gt;


</code></pre></div><h5 id="属性："><a href="#属性：" class="header-anchor">#</a> 属性：</h5> <p>####1 判断跳转的条件 条件语句:if,else if ,else</p> <div class="language- extra-class"><pre class="language-text"><code>ty:if=&quot;&quot;
ty:elif=&quot;&quot;
ty:else=&quot;&quot;


例子：ty:if=&quot;code==3||(state==1&amp;&amp;(varA&gt;0))&quot;
     ty:elif=&quot;code==3||(state==1&amp;&amp;(varA&gt;0))&quot;
     ty:else=&quot;code==3||(state==1&amp;&amp;(varA&gt;0))&quot;

组成部分：1 参数：必须存储在数据绑定的xxxData.js
         2 运算符：==,+,-,*,/,%,&amp;&amp;,||,!,(),&gt;,&lt;,&gt;=,&lt;=
         
          
上面的例子中 code,state,varA为参数 存在每张界面中的xxxdata.js中

条件语句不写则为直接跳转 (只适合于只有一种无条件跳转)例：
&lt;forward&gt;
&lt;path url=&quot;main.tml&quot; config=&quot;configKey1&quot;/&gt; &lt;!--直接跳转界面 使用configKey1效果--&gt;。
&lt;/forward&gt;

&lt;backward&gt;
&lt;path/&gt;  &lt;!--直接返回上层界面 使用default--&gt;。
&lt;/backward&gt;

config属性不写则使用 pageControConfigMap中key为default的配
置，例子：
push:
--------
&lt;forward&gt;
  &lt;path ty:if=&quot;code!=2&quot; url=&quot;page1.tml&quot;/&gt;
&lt;/forward&gt;
--------
pop:
--------
&lt;backward&gt;
  &lt;path url=&quot;page1.tml&quot;/&gt;
&lt;/backward&gt;
--------
</code></pre></div><p>支持的运算符</p> <table><thead><tr><th>运算符</th> <th>逻辑意义</th></tr></thead> <tbody><tr><td>==</td> <td>等于</td></tr> <tr><td>+</td> <td>算数加</td></tr> <tr><td>-</td> <td>算数减</td></tr> <tr><td>*</td> <td>算数乘</td></tr> <tr><td>/</td> <td>算数除 （整数为整除，有小数为浮点数 ）</td></tr> <tr><td>%</td> <td>算数模除</td></tr> <tr><td>&amp;&amp;</td> <td>逻辑与</td></tr> <tr><td>||</td> <td>逻辑或</td></tr> <tr><td>！</td> <td>逻辑非</td></tr> <tr><td>（）</td> <td>括号优先级</td></tr> <tr><td>&gt;</td> <td>大于</td></tr> <tr><td>&lt;</td> <td>小于</td></tr> <tr><td>&gt;=</td> <td>大于等于</td></tr> <tr><td>&lt;=</td> <td>小于等于</td></tr></tbody></table> <h4 id="目标界面：url"><a href="#目标界面：url" class="header-anchor">#</a> 目标界面：url</h4> <p>url为界面名，界面名需要独一无二  如login.tml</p> <h4 id="跳转效果配置-config"><a href="#跳转效果配置-config" class="header-anchor">#</a> 跳转效果配置 config</h4> <p>值为配置在pageControConfig.json 中效果的key
不配置则默认取pageControConfig 中的default效果(backward , forward)</p> <h3 id="前端调用方法"><a href="#前端调用方法" class="header-anchor">#</a> 前端调用方法</h3> <hr> <p>前向跳转
Window.forward(callback)</p> <p>反向后退
Window.backward(callback)</p> <h4 id="更新方式"><a href="#更新方式" class="header-anchor">#</a> 更新方式</h4> <p>采用资源更新方式，资源更新后优先读取资源更新的目录。</p> <h3 id="成功及错误码"><a href="#成功及错误码" class="header-anchor">#</a> 成功及错误码</h3> <hr> <table><thead><tr><th>错误代码</th> <th>详细信息</th></tr></thead> <tbody><tr><td>30000</td> <td>正确无误</td></tr> <tr><td>30001</td> <td>无配置文件</td></tr> <tr><td>30002</td> <td>逻辑表达式有误</td></tr> <tr><td>30003</td> <td>没有找到匹配的界面</td></tr> <tr><td>30004</td> <td>无跳转效果配置文件</td></tr> <tr><td>30005</td> <td>未找到符合的条件</td></tr> <tr><td>30006</td> <td>跳转方式与界面性质不匹配  (frame page  push  present)</td></tr> <tr><td>30007</td> <td>栈内不存在的界面</td></tr></tbody></table></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/tiny3.0/Tags/mvvm.html" class="prev">mvvm数据绑定</a></span> <span class="next"><a href="/tiny3.0/Tags/Flex.html">Flex</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/tiny3.0/assets/js/app.4f7fd702.js" defer></script><script src="/tiny3.0/assets/js/2.a15a07d6.js" defer></script><script src="/tiny3.0/assets/js/24.7ff93635.js" defer></script>
  </body>
</html>
